
<!DOCTYPE html>
<html>
<head>
  <title>Push Notifier</title>
</head>
<body>
<script>
(function() {
    const channel = "$1225051102$"; // Kanalen man prenumererar på
    const ws = new WebSocket("ws://localhost:3083/ws/" + channel);

    console.log("Försöker ansluta till kanal:", channel);

    ws.onopen = function() {
        console.log("WebSocket ansluten till kanal:", channel);
    };

    ws.onmessage = function(event) {
        console.log("Meddelande mottaget:", event.data);
        try {
            const data = JSON.parse(event.data);
            alert("Push notis: " + data.message);
        } catch (e) {
            console.error("Kunde inte tolka push-data:", e);
        }
    };

    ws.onerror = function(error) {
        console.error("WebSocket-fel:", error);
    };

    ws.onclose = function(event) {
        console.warn("WebSocket frånkopplad. Kod:", event.code, "Anledning:", event.reason);
    };
})();
</script>
</body>
</html>